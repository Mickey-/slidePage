require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(){var a='<a class="compoent m-<@= type @> goods <@= special.direction @>" href="<@= content.goodsUrl @>" target="_blank"><img src="<@= content.picUrl @>" alt="<@= content.title @>"><div class="info"><div class="info-text"><h4 data-text-key="content.title"><@= content.title @></h4><p data-text-key="content.price"><@= content.price @></p></div><span>立即购买</span></div></a>';"undefined"!=typeof b&&b.exports&&(b.exports=a),"undefined"==typeof ender&&(this["tpl/goods"]=a),"function"==typeof define&&(define.amd||define.fmd)&&define("tpl/goods",[],function(){return a})}()},{}],2:[function(a,b,c){!function(){var a='<section class="phone-page" data-animate="<@= aniName @>"></section>';"undefined"!=typeof b&&b.exports&&(b.exports=a),"undefined"==typeof ender&&(this["tpl/page"]=a),"function"==typeof define&&(define.amd||define.fmd)&&define("tpl/page",[],function(){return a})}()},{}],3:[function(a,b,c){!function(){var a='<a class="picture compoent" href="<@=content.url || \'javascript:void(0)\'@>"><div class="clip-box-wrapper"><div class="img-clip-box"><div class="thumb-box"></div></div></div><div class="img-mask"><img class="real-img" src=""/></div></a>';"undefined"!=typeof b&&b.exports&&(b.exports=a),"undefined"==typeof ender&&(this["tpl/picture"]=a),"function"==typeof define&&(define.amd||define.fmd)&&define("tpl/picture",[],function(){return a})}()},{}],4:[function(a,b,c){!function(){var a='<a class="compoent m-<@= type @> <@= special.direction @>" href="<@= content.url || \'javascript:void(0)\' @>" target="_blank"><div data-text-key="content.text" class="tag-text"><span><@= content.text @></span></div><i class="iconfont icon-add ball-scale-multiple"><div></div><div></div><div></div></i></a>';"undefined"!=typeof b&&b.exports&&(b.exports=a),"undefined"==typeof ender&&(this["tpl/tag"]=a),"function"==typeof define&&(define.amd||define.fmd)&&define("tpl/tag",[],function(){return a})}()},{}],5:[function(a,b,c){!function(){var a='<a class="compoent m-<@= type @>" target="_blank" href="<@= content.href || \'javascript:void(0)\' @>"><pre data-text-key="content.text"><@= content.text @></pre></a>';"undefined"!=typeof b&&b.exports&&(b.exports=a),"undefined"==typeof ender&&(this["tpl/text"]=a),"function"==typeof define&&(define.amd||define.fmd)&&define("tpl/text",[],function(){return a})}()},{}],6:[function(a,b,c){var d=a("./events"),e=new d;b.exports=e},{"./events":9}],7:[function(a,b,c){var d=new Function,e={hide:d,show:d,append:d,hasClass:d,remove:d},f={$el:e,_hidden:!1,append:function(a,b){var c,d,e;if("[object Array]"===Object.prototype.toString.call(a))for(c=0,d=a.length;d>c;c++)e=a[c],this._append(e,b);else this._append(a,b);return this},_append:function(a,b){var c=b?"prepend":"append";this.$el[c](a.$el)},appendTo:function(a){return a.find?a.append(this.$el):a.append&&a.append(this),this.$el.hasClass("none")&&this.hide(),this},prependTo:function(a){return a.find?a.prepend(this.$el):a.append&&a.append(this,!0),this.$el.hasClass("none")&&this.hide(),this},show:function(){return this._hidden&&(this.$el.removeClass("none"),this._hidden=!1),this},hide:function(){return this._hidden||(this.$el.addClass("none"),this._hidden=!0),this},remove:function(){this.$el&&this.$el.remove()},dispose:function(){var a;this.fire("disposing"),this.$el&&this.$el.remove();for(a in this)delete this[a]},commonUpdate:function(a){var b=this;Object.keys(a).forEach(function(c){b.$el.find('[data-text-key="'+c+'"]').text(a[c]),b.$el.find('[data-key="'+c+'"]').val(a[c])})},tmplMap:{},_template:function(a,b){return this.tmplMap[a]||(this.tmplMap[a]=_.template(a)),this.tmplMap[a](b)}};f=$.extend({},a("./events").prototype,f),b.exports=f},{"./events":9}],8:[function(a,b,c){function d(a){var b=document.getElementById(a);this.length=1,this.context=b,this[0]=b}function e(a){var b=a.substring(1);return new d(b)}function f(a){return null==a?String(a):class2type[toString.call(a)]||"object"}d.prototype={constructor:d.constructor,getComputedStyle:function(){return"getComputedStyle"in window?window.getComputedStyle(this.context):"currentStyle"in this.context?this.context.currentStyle:void 0},width:function(){var a=this.getComputedStyle().width;return parseInt(a,10)},splice:function(){},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},inArray:function(a,b){if(this.isArray(b)){if(b.indexOf)return b.indexOf(a);for(var c=0,d=b.length;d>c;c++)if(b[c]===a)return c;return-1}},each:function(a){e.each({0:this[0]},a)}};var g=function(a,b){var c,d=1;c=Array.prototype.slice.call(arguments),"[object Boolean]"!==Object.prototype.toString.call(a)&&(b=a,d=0);for(var e,f=d+1,g=c.length;g>f;f++){e=c[f];for(var h in e)b[h]=e[h]}return b};if(e.extend=g,class2type={},e.extend(e,{fn:d.prototype,each:function(a,b){if("[object Array]"===Object.prototype.toString.call(a))for(var c=0,d=a.length;d>c;c++)b(c,a[c]);else for(var e in a)b(e,a[e])},isFunction:function(a){return"function"==f(a)}}),!Function.prototype.bind){var h=function(){},i=Array.prototype.slice;Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError("Function.prototype.bind called on incompatible "+b);for(var c=i.call(arguments,1),d=function(){if(this instanceof j){var d=b.apply(this,c.concat(i.call(arguments)));return Object(d)===d?d:this}return b.apply(a,c.concat(i.call(arguments)))},e=Math.max(0,b.length-c.length),f=[],g=0;e>g;g++)f.push("$"+g);var j=Function("binder","return function ("+f.join(",")+"){return binder.apply(this,arguments)}")(d);return b.prototype&&(h.prototype=b.prototype,j.prototype=new h,h.prototype=null),j}}window.jQuery?b.exports=window.jQuery:window.zepto?b.exports=window.zepto:b.exports=e},{}],9:[function(a,b,c){function d(){}var e=a("./dep"),f=1e6;e.extend(d.prototype,{_checkListener:function(a,b){var c,d;if(!a)return-1;if(d=a.length,a.indexOf)return a.indexOf(b);for(;c=a[--d];)if(c==b)return d;return-1},on:function(a,b){var c;return"function"!=typeof b?this:(this.__listeners||(this.__listeners={}),this.__listeners[a]||(this.__listeners[a]=[]),c=this.__listeners[a],-1==this._checkListener(c,b)&&c.push(b),this)},off:function(a,b){var c,d;return this.__listeners&&(c=this.__listeners[a]),-1!=(d=this._checkListener(c,b))&&(c[d]=null),b===!0&&delete this.__listeners[a],this},fire:function(a){var b,c,d,e,f=0;if((e=this.__listeners&&this.__listeners[a])&&e.length)for(b=Array.prototype.slice.call(arguments,1),c=e.length;c>f;f++)d=e[f],null===d?(e.splice(f,1),c=e.length,f--):d.apply(this,b)},_guid:function(){return"mvc"+f++},dispose:function(){var a;this.fire("disposing");for(a in this)this[a]=null,delete this[a]}}),b.exports=d},{"./dep":8}],10:[function(a,b,c){Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),Object.isPlainObject=function(a){return"[object Object]"===Object.prototype.toString.call(a)};var d={flatData:function(a){function b(a,d){if(Object(a)!==a)c[d]=a;else if(Array.isArray(a)){for(var e=0,f=a.length;f>e;e++)b(a[e],d+"["+e+"]");0===f&&(c[d]=[])}else{var g=!0;for(var h in a)g=!1,b(a[h],d?d+"."+h:h);g&&d&&(c[d]={})}}var c={};return b(a,""),c},unflatData:function(a){if(Object(a)!==a||Array.isArray(a))return a;var b=/\.?([^.\[\]]+)|\[(\d+)\]/g,c={};for(var d in a){for(var e,f=c,g="";e=b.exec(d);)f=f[g]||(f[g]=e[2]?[]:{}),g=e[2]||e[1];f[g]=a[d]}return c[""]||c}};b.exports=d,window.helper=window.helper?$.extend(window.helper,d):d},{}],11:[function(a,b,c){function d(a){return this._propVal[a]}function e(a,b){var c,d=!1;return Array.isArray(b)||$.isPlainObject(b)?(c=$.extend(!0,{},this._propVal[a]),this._propVal[a]?$.extend(!0,this._propVal[a],g.unflatData(b)):this._propVal[a]=b,d=!0):this._propVal[a]!==b&&(c=this._propVal[a],this._propVal[a]=b,d=!0),d&&(this._prePropVal[a]=c),d}var f=a("./events"),g=a("./helper"),h={_prop:function(a,b,c){this._propVal||(this._propVal={},this._prePropVal={}),this[a]=function(b){return"undefined"==typeof b?(console.assert(this[a],a),this[a].getter.call(this,a)):(this[a].setter.call(this,a,b)&&this.fire(a+"Updated",b,this._prePropVal[a],a),this)},this[a].getter=c&&"function"==typeof c.getter?c.getter:d,this[a].setter=c&&"function"==typeof c.setter?c.setter:e,"undefined"!=typeof b&&this[a].setter.call(this,a,b)},setData:function(a,b,c){c=c||{};for(var d,e,f=0,g=a.length;g>f;f++)d=a[f],void 0!==(e=b[c[d]||d])&&("function"==typeof this[d]?this[d](e):this[d]=e)}};$.extend(h,f.prototype),b.exports=h},{"./events":9,"./helper":10}],12:[function(a,b,c){var d={injector:[],init:function(){return this},addInjectRule:function(a){"function"==typeof a&&this.injector.push(a)},sendRequest:function(a){var b,c;for(b=0,c=this.injector.length;c>b;b++)this.injector[b](a);return $.ajax(a)}};b.exports=d},{}],"j/aKKu":[function(a,b,c){var d=a("./../../mod/elements/factory"),e=window.data,f=a("./../../mod/renderer/resetViewport"),g=a("./../../mod/slide/slide"),h={curPage:1,init:function(){this.imgNum=0,this.loadedImgNum=0,f("#wrap"),this._render()},_render:function(){var a=d.parse(e),b=[],c=this;a.children().each(function(a,d){var e=$(d),f=e.css("background-image").match(/url\((\S+)\)/);f=f?f[1]:"",c.imgNum+=e.find("img").not('[src=""]').length,f&&(c.imgNum++,b.push(f))}),b.forEach(function(a,b){$("<img>").attr("src",a).on("load",c._updateImgLoadStatus)}),$("#wrap").append(a).find("img").on("load",c._updateImgLoadStatus)},_updateImgLoadStatus:function(a){if(!h.loadCompleted){h.loadedImgNum++;var b,c=Math.round(h.loadedImgNum/h.imgNum*100)+"%";$("#J_progress").html(c),h.loadedImgNum>=h.imgNum&&(h.loadCompleted=!0,b=setTimeout(function(){$("#J_loading").hide(),h._initPageSlide(),clearTimeout(b)},400))}},_initPageSlide:function(){var a=new g({container:"#wrap"});a.enable()}};b.exports=h},{"./../../mod/elements/factory":18,"./../../mod/renderer/resetViewport":27,"./../../mod/slide/slide":28}],h5render_rawjson:[function(a,b,c){b.exports=a("j/aKKu")},{}],15:[function(a,b,c){function d(a){this._init.apply(this,arguments)}var e=a("../../external/ctr"),f=a("../../external/broadcast"),g=a("./formatter"),h=$.extend(d.prototype,e);h._init=function(a){return 0!==arguments.length?(this._id=this._guid(),this.model=a,this.$el=$(this._template(this.tpl,a.data())).data("_id",a._id),this.init.apply(this,arguments),this._render(),this._bindEvent(),this.$el):void 0},h.type="default",h.tpl="<div></div>",h._render=function(){this._renderStyles(),this.render()},h._renderStyles=function(){var a=g.formatStyles(this.model.data().styles);this.$el.css(a)},h._bindEvent=function(){var a=this;this.model.on("dataUpdated",function(b){a.commonUpdate(b);var c=Object.keys(b).some(function(a){return/styles/.test(a)});c&&a._renderStyles(),a.update(b)}),this.model.on("disposing",function(){a.dispose()}),this.model.on("newModel",function(b){f.fire("newCtr",a,b)}),this.model.on("removeModel",function(b){f.fire("removeCtr",a,b)}),this.bindEvent()},h.init=function(){},h.bindEvent=function(){},h.render=function(){},h.update=function(){},b.exports=d},{"../../external/broadcast":6,"../../external/ctr":7,"./formatter":19}],16:[function(a,b,c){function d(){this.$el=$(document.createDocumentFragment())}var e=a("../../external/ctr");$.extend(d.prototype,e),b.exports=d},{"../../external/ctr":7}],17:[function(a,b,c){window.data=[{type:"page",aniName:"slideUp",styles:{backgroundImage:"https://img.alicdn.com/tps/TB1dKFOIFXXXXXYXXXXXXXXXXXX.png",backgroundPosition:"0 165px"},elements:[{type:"text",content:{text:"",url:""},styles:{background:"#6b6ec8",padding:"0px",top:25,left:12,width:6,height:110,duration:"1s",aniName:"slideInDown"}},{type:"text",content:{text:"2015",url:""},styles:{fontSize:"30px",lineHeight:1,top:30,left:31,width:250,height:32,delay:"0.4s",duration:"1s",aniName:"slideInDown"}},{type:"text",content:{text:"春夏流行新品首发",url:""},styles:{fontSize:"30px",lineHeight:1,top:69,left:31,width:250,height:32,delay:"0.8s",duration:"1s",aniName:"slideInDown"}},{type:"text",content:{text:"Fashion by asos",url:""},styles:{fontSize:"24px",color:"#adadc1",lineHeight:1,top:109,left:31,width:250,height:26,delay:"1.2s",duration:"1s",aniName:"slideInDown"}}]},{type:"page",aniName:"slideUp",styles:{backgroundImage:"https://img.alicdn.com/tps/TB1u4CUIFXXXXa1aXXXXXXXXXXX.jpg"},elements:[{type:"text",content:{text:"疯狂的印花\n不一样的美",url:""},styles:{zIndex:1,fontSize:"20px",background:"rgba(255, 255, 255, 0.6)",padding:"17px 0 20px 0",top:0,left:60,textAlign:"center",width:200,height:85,duration:"1.5s",aniName:"bounceInDown"}},{type:"text",content:{text:"",url:""},styles:{zIndex:1,background:"rgba(255, 255, 255, 0.8)",top:200,left:130,width:170,height:270,delay:"0.4s",duration:"1.5s",aniName:"bounceInUp"}},{type:"text",content:{text:"有灵气气质的菇凉看这里，阿凡达里众神祈祷的那一幕是不是历历在目，夜晚的森林小动物们跑出来嬉戏狂歌围绕在你身边歌唱颂诗你事森林的女儿，用夜做掩护尽情撒欢",url:""},styles:{zIndex:1,fontSize:"14px",lineHeight:1.5,top:280,left:145,width:140,height:200,delay:"0.4s",duration:"1.5s",aniName:"bounceInUp"}}]},{type:"page",aniName:"slideUp",styles:{backgroundImage:"https://img.alicdn.com/tps/TB1USduIFXXXXbFXFXXXXXXXXXX.png"},elements:[{type:"text",content:{text:"",url:""},styles:{background:"rgba(255, 255, 255, 0.9)",bottom:0,left:0,width:320,height:150,duration:"1s",aniName:"bounceInUp"}},{type:"text",content:{text:"美丽的印花搭配什么都很有气场，很好驾驭和搭配。款式廓形大方，版型舒适宽松，其搭配性，组合性以及可塑性，能在不同人中产生无穷的变化，让人一见倾心。让人一见倾心。",url:""},styles:{fontSize:"14px",lineHeight:1.5,bottom:30,left:20,width:280,height:100,delay:"0s",duration:"1.5s",aniName:"zoomIn"}}]},{type:"page",aniName:"slideUp",styles:{backgroundImage:"https://img.alicdn.com/tps/TB1GClHIFXXXXXlXpXXXXXXXXXX.png"},elements:[{type:"text",content:{text:"",url:""},styles:{background:"#ff5e5c",top:0,left:20,width:80,height:92,duration:"1s",aniName:"slideInDown"}},{type:"text",content:{text:"WOMEN",url:""},styles:{fontSize:"14px",color:"#fff",lineHeight:1,fontWeight:"bold",textAlign:"center",top:30,left:20,width:80,height:20,delay:"0.3s",duration:"1s",aniName:"zoomIn"}},{type:"text",content:{text:"女装新品",url:""},styles:{fontSize:"14px",color:"#fff",lineHeight:1,textAlign:"center",top:55,left:20,width:80,height:20,delay:"0.6s",duration:"1s",aniName:"zoomIn"}},{type:"tag",special:{direction:"left"},content:{text:"蝶绒休闲裤",url:"http://www.taobao.com"},styles:{top:70,left:190,color:"#FFF",aniName:"slideInRight",delay:"0.9s",duration:"1s"}},{type:"tag",special:{direction:"right"},content:{text:"个性牛皮女包"},styles:{top:290,left:5,color:"#FFF",aniName:"slideInLeft",delay:"0.6s",duration:"1s"}},{type:"tag",special:{direction:"right"},content:{text:"知性哈伦裤 ￥231"},styles:{top:420,left:80,color:"#FFF",aniName:"slideInLeft",delay:"0.3s",duration:"1s"}}]},{type:"page",aniName:"slideUp",styles:{background:"#fff"},elements:[{type:"text",content:{text:"春夏印花系列",url:""},styles:{fontSize:"20px",top:10,left:15,width:150,height:27,delay:"0s",duration:"1.5s",aniName:"flipInY"}},{type:"text",content:{text:"和春天来个约会",url:""},styles:{fontSize:"15px",color:"#999",top:35,left:15,width:150,height:20,delay:"0.5s",duration:"1.5s",aniName:"flipInY"}},{type:"goods",special:{direction:"right"},content:{title:"黑色酥胸衣",price:"￥125",picUrl:"https://img.alicdn.com/tps/TB1ss8NIFXXXXX.XXXXXXXXXXXX.png",goodsUrl:"http://detail.tmall.com/item.htm?spm=a230r.1.14.4.KFR9bY&id=45035099196&ns=1&abbucket=8"},styles:{top:79,left:15,rotate:0,aniName:"zoomIn",duration:"1.3s"}},{type:"goods",special:{direction:"bottom"},content:{title:"花朵印花T恤",price:"￥215",picUrl:"https://img.alicdn.com/tps/TB1e0JPIFXXXXXxXXXXXXXXXXXX.png",goodsUrl:"https://item.taobao.com/item.htm?spm=a230r.1.14.30.Yk0NkP&id=520175799790&ns=1&abbucket=8#detail"},styles:{top:20,left:205,rotate:0,aniName:"zoomIn",delay:"0.4s",duration:"1.3s"}},{type:"goods",special:{direction:"right"},content:{title:"机器人斜挎包",price:"￥321",picUrl:"https://img.alicdn.com/tps/TB1NPFAIFXXXXb8XpXXXXXXXXXX.png",goodsUrl:"https://item.taobao.com/item.htm?spm=a230r.1.14.258.QXTsY0&id=43146838673&ns=1&abbucket=8#detail"},styles:{top:200,left:60,rotate:0,aniName:"zoomIn",delay:"0.8s",duration:"1.3s"}},{type:"goods",special:{direction:"bottom"},content:{title:"时尚牛皮背包",price:"￥234",picUrl:"https://img.alicdn.com/tps/TB1n30IIFXXXXcZXXXXXXXXXXXX.png",goodsUrl:"https://item.taobao.com/item.htm?spm=a230r.1.14.359.ibidFi&id=520171484484&ns=1&abbucket=8#detail"},styles:{top:320,left:30,rotate:0,aniName:"zoomIn",delay:"1.2s",duration:"1.3s"}},{type:"goods",special:{direction:"bottom"},content:{title:"什么蝴蝶结",price:"￥98",picUrl:"https://img.alicdn.com/tps/TB1lu8lIFXXXXXxaXXXXXXXXXXX.png",goodsUrl:"https://item.taobao.com/item.htm?spm=a230r.1.14.359.ibidFi&id=520171484484&ns=1&abbucket=8#detail"},styles:{top:320,left:170,rotate:0,aniName:"zoomIn",delay:"1.6s",duration:"1.3s"}}]},{type:"page",aniName:"slideUp",styles:{backgroundColor:"red"},elements:[{type:"goods",special:{direction:"bottom"},content:{title:"这是一个商品",price:"2.00",picUrl:"",goodsUrl:""},styles:{top:20,left:200,rotate:0,aniName:"rotateIn",delay:"2s",duration:"10s"}},{type:"picture",content:{picUrl:"https://img.alicdn.com/tps/i4/TB11nqWIpXXXXbwXVXXSYoGNVXX-400-422.jpg",url:"http://www.taobao.com"},styles:{top:200,left:200,rotate:0,aniName:"rotateIn",delay:"0s",duration:"3s"},picStyles:{width:200,height:211},mask:{width:50,height:50,top:9,left:103,type:"square"}},{type:"text",content:{text:"这里是一个text\n点击去淘宝",url:"http://www.baidu.com"},styles:{lineHeight:"12px",fontSize:"12px",fontFamily:"",color:"#FF0000",background:"#000000",fontWeight:"normal",textDecoration:"underline",textAlign:"center",padding:"10px",borderWidth:"1px",borderStyle:"solid",borderColor:"green",top:0,left:0,width:100,rotate:120,height:100,delay:"0s",duration:"5s",aniName:"zoomIn"}},{type:"tag",special:{direction:"right"},content:{text:"这是一个tag"},styles:{top:200,left:10,aniName:"bounceIn",delay:"3s",duration:"1s"}}]}],window.globelConfig={projectName:"这是一个碉堡的工程",thumbPic:"//img.alicdn.com/tps/i4/TB11nqWIpXXXXbwXVXXSYoGNVXX-400-422.jpg",skin:"normal",category:"test"}},{}],18:[function(a,b,c){a("./example");var d={noDuplicated:!0,models:{},ctrs:{},modelCtrMap:{},keyMap:{goods:a("./goods"),page:a("./page"),picture:a("./picture"),tag:a("./tag"),text:a("./text"),"default":a("./element"),poster:a("./empty"),empty:a("./empty")},defaultData:{goods:{type:"goods"},page:{type:"page",styles:{},aniName:"fadeUp"},picture:{type:"picture",content:{picUrl:"",url:""},styles:{rotate:0,aniName:"zoomIn",delay:"0s",duration:"1s"},picStyles:{width:100,height:100},mask:{width:50,height:50,top:0,left:0,type:"square"}},tag:{type:"tag",special:{direction:"right"},content:{text:"标签tag"},styles:{top:0,left:0,color:"#FFF",aniName:"slideInRight",delay:"0s",duration:"1s"}},text:{type:"text",content:{text:"这里是一个默认的字体\n点击去淘宝",url:""},styles:{lineHeight:1,fontSize:"12px",fontFamily:"",color:"#333",background:"transparent",fontWeight:"normal",textAlign:"left",padding:"0px",borderWidth:"0px",borderStyle:"solid",borderColor:"#333",width:100,rotate:0,height:100,aniName:"flipInY",delay:"0s",duration:"1s"}},"default":{text:"默认文案"}},modelMap:{"default":a("./model"),poster:a("../poster/model")},createModel:function(a){var b,c=a.type||a,d=a.constructor===String?$.extend(!0,{},this.defaultData[c]):$.extend(!0,{},this.defaultData[c],a),e=this.modelMap[c]||this.modelMap["default"];return b=new e(d),b.on("disposing",this._removingModel),this.models[b._id]=b,this.modelCtrMap[b._id]=[],b},createCtr:function(a){var b,c,d,e=a.type||a,f=this.keyMap[e],g=a._id;if(this.noDuplicated&&(d=this.getCtrsByModel(a)))for(var h=0;h<d.length;h++)if(f===d[h].constructor)return d[h];return b=new f(a),b.on("disposing",this._removingCtr),this.ctrs[b._id]=b,g&&((c=this.modelCtrMap[g])||(this.modelCtrMap[g]=[],c=this.modelCtrMap[g]),c.push(b._id)),b},parseModel:function(a,b){var c;if(Array.isArray(a)){b=b||[];for(var d=0,e=a.length;e>d;d++)this.parseModel(a[d],b)}else a.hasOwnProperty("type")&&(c=this.createModel(a),a.elements&&this.parseModel(a.elements,c),b?Array.isArray(b)?b.push(c):b.addModel(c):b=c);return 1===b.length?b[0]:b},parseCtr:function(a,b){var c;if(Array.isArray(a)){b=b||this.createCtr("empty");for(var d=0,e=a.length;e>d;d++)this.parseCtr(a[d],b)}else c=this.createCtr(a),b?b.append(c):b=c,a.eles&&this.parseCtr(a.eles,c);return b},parse:function(a,b){var c=this;if(Array.isArray(a)){b=b||$(document.createDocumentFragment());var d=this.createCtr("empty");return a.forEach(function(a){c.parseCtr(c.parseModel(a),d)}),b.append(d.$el)}return this.parseCtr(this.parseModel(a))},getCtrsByModel:function(a){var b,c=this.modelCtrMap[a._id];if(c&&c.length){b=[];for(var d=0;d<c.length;d++)b.push(this.ctrs[c[d]])}return b},getObjById:function(a){return this.models[a]||this.ctrs[a]},_removingModel:function(){d.models[this._id]=null,d.modelCtrMap[this._id]=null},_removingCtr:function(){d.ctrs[this._id]=null}};window.factory=d,b.exports=d},{"../poster/model":26,"./element":15,"./empty":16,"./example":17,"./goods":20,"./model":21,"./page":22,"./picture":23,"./tag":24,"./text":25}],19:[function(a,b,c){var d={formatStyles:function(a){var b=Object.create(null),c={rotate:function(){b["-webkit-transform"]="rotate("+a.rotate+"deg)"},delay:function(){b["-webkit-animation-delay"]=a.delay},aniName:function(){b["-webkit-animation-name"]=a.aniName},duration:function(){b["-webkit-animation-duration"]=a.duration},backgroundImage:function(){b.backgroundImage="url("+a.backgroundImage+")"}};for(var d in a)c[d]?c[d]():b[d]=a[d];return b},formatInt:function(a){try{a=parseInt(a)}catch(b){throw a=0,"formatInt Exception"}return a},formatSec:function(a){return"s"===a.substr(a.length-1,1)?a=a.slice(0,-1):a+="s",a},noop:function(a){return a}};window.formatter=d,b.exports=d},{}],20:[function(a,b,c){function d(){this._init.apply(this,arguments)}var e=a("./element");d.prototype=new e,d.prototype.constructor=d;var f=d.prototype;f["super"]=e,f.type="goods",f.tpl=a("../../_template/goods"),f.bindEvent=function(){var a=this;this.model.on("dataUpdated",function(b,c){var d=b["content.picUrl"],e=b["content.goodsUrl"],f=c.content.picUrl,g=c.content.goodsUrl;b.content&&(b.content.picUrl?d=b.content.picUrl:b.content.goodsUrl&&(e=b.content.goodsUrl)),d&&d!=f&&a.$el.find("img").attr("src",d),e&&e!=g&&a.$el.attr("href",e)})},b.exports=d},{"../../_template/goods":1,"./element":15}],21:[function(a,b,c){function d(a){var b=this,c=$.extend({},a,{elements:null});delete c.elements,this._prop("data",c),this._prop("status","normal"),this._prop("num",0),this.fields=["type"],this.highIndex=1,this._childDispoingHandler=function(){b.removeModel(this)},this._id=this._guid(),d.keyMap[this._id]=this,this.fields&&this.setData(this.fields,c)}var e,f=a("../../external/model");e=$.extend(d.prototype,f),d.keyMap={},d.get=function(a){return this.keyMap[a]},e.addModel=function(a){if(this.eles||(this.eles=[]),-1!==this.indexOf(a))return this;var b=a.data().styles.zIndex;return b&&(this.highIndex=this.highIndex>b?this.highIndex:b),this.eles.push(a),this.fire("newModel",a),a.on("disposing",this._childDispoingHandler),this},e.removeModel=function(a){var b=this.indexOf(a);return b>-1&&(this.eles.splice(b,1),delete d.keyMap[a._id],this.fire("removeModel",a,b)),this},e.indexOf=function(a){return this.eles?this.eles.indexOf(a):-1},e.generateJson=function(a){var b={};if(a&&this.clipData?$.extend(b,this.clipData):$.extend(b,this.data()),this.eles){b.elements=[];for(var c=0,d=this.eles.length;d>c;c++)b.elements.push(this.eles[c].generateJson())}return b},e.getDescendentByType=function(a,b){if(this.eles){b=b||[];for(var c,d=0;d<this.eles.length;d++)c=this.eles[d],c.type==a&&b.push(c),this.eles[d].getDescendentByType(a,b)}return b},window.ElementModel=d,b.exports=d},{"../../external/model":11}],22:[function(a,b,c){function d(){this._init.apply(this,arguments)}var e,f=a("./element");a("../../external/broadcast");e=$.extend(d.prototype,f.prototype),e.type="page",e["super"]=f,e.tpl=a("../../_template/page"),b.exports=d},{"../../_template/page":2,"../../external/broadcast":6,"./element":15}],23:[function(a,b,c){function d(){this._init.apply(this,arguments)}var e=a("./element");d.prototype=new e,d.prototype.constructor=d;var f=d.prototype;f.type="picture",f["super"]=e,f.tpl=a("../../_template/picture"),f.init=function(){this.$thumbBox=this.$el.find(".thumb-box"),this.$realImg=this.$el.find(".real-img"),this.$imgClipBox=this.$el.find(".img-clip-box"),this.$imgMask=this.$el.find(".img-mask"),this.$clipWrapper=this.$el.find(".clip-box-wrapper")},f.generateClipBoxStyle=function(){var a=Object.create(null),b=this.model.data();return a.width=b.picStyles.width,a.height=b.picStyles.height,a.backgroundImage="url("+b.content.picUrl+")",a},f.generateClipWrapperStyle=function(){var a=Object.create(null),b=this.model.data();return a.top=-b.mask.top,a.left=-b.mask.left,a},f.generateRealImgStyle=function(){var a=Object.create(null),b=this.model.data();return a.width=b.picStyles.width,a.height=b.picStyles.height,a.top=-b.mask.top,a.left=-b.mask.left,a},f.generateMaskStyle=function(){var a=Object.create(null),b=this.model.data(),c=b.mask;return"circle"===c.type?a.borderRadius=Math.min(c.width,c.height)/2:a.borderRadius=0,a.width=b.mask.width,a.height=b.mask.height,a},f.generateThumboxStyle=function(){var a=Object.create(null),b=this.model.data(),c=b.mask;return $.extend(!0,a,c),"circle"===c.type?a.borderRadius=Math.min(c.width,c.height)/2:a.borderRadius=0,a},f.render=function(a){var b=this.model.data(),c=!0;if(a)var d=Object.keys(a),c=d.some(function(a){return/mask.type/.test(a)});c&&this.$el.removeClass("circle square").addClass(b.mask.type),this.$thumbBox.css(this.generateThumboxStyle()),this.$realImg.css(this.generateRealImgStyle()).attr("src",b.content.picUrl),this.$imgClipBox.css(this.generateClipBoxStyle()),this.$imgMask.css(this.generateMaskStyle()),this.$clipWrapper.css(this.generateClipWrapperStyle())},f.bindEvent=function(){var a=this;this.model.on("dataUpdated",function(b){a.render(b)})},b.exports=d},{"../../_template/picture":3,"./element":15}],24:[function(a,b,c){function d(){this._init.apply(this,arguments)}var e=a("./element");d.prototype=new e,d.prototype.constructor=d;var f=d.prototype;f["super"]=e,f.type="tag",f.tpl=a("../../_template/tag"),f.bindEvent=function(){var a=this;this.model.on("dataUpdated",function(b){var c;((c=b["content.url"])||(c=b.content&&b.content.url))&&a.$el.find("a").attr("href",c),b.special&&b.special.direction&&a.$el.removeClass("left right").addClass(b.special.direction)})},b.exports=d},{"../../_template/tag":4,"./element":15}],25:[function(a,b,c){function d(){this._init.apply(this,arguments)}var e=a("./element");d.prototype=new e,d.prototype.constructor=d;var f=d.prototype;f["super"]=e,f.type="text",f.tpl=a("../../_template/text"),b.exports=d},{"../../_template/text":5,"./element":15}],26:[function(a,b,c){function d(a,b,c){this._prop("data"),this._prop("cover","http://g01.alibaba-inc.com/tfscom/TB1PU3kIXXXXXavXXXXXXXXXXXX.tfsprivate.png"),this._prop("desc",""),this._prop("title","testing"),this._id=a,this.type="poster",this.fetchUrl=c,this._error=this._error.bind(this),this._success=this._success.bind(this),this._always=this._always.bind(this),b&&this.data(b)}var e,f=a("../elements/model"),g=a("../../external/service");e=$.extend(d.prototype,f.prototype),e.get=function(){this.fire("loading"),this.data(data),this._always()},e.save=function(){g.sendRequest(this._getPostRequestObj(this.generateJson())).then(this._success,this._error).always(this._always)},e.generateJson=function(){for(var a,b=[],c=0,d=this.eles.length;d>c;c++)a=this.eles[c],b.push(a.generateJson());return b},e.getPage=function(a){return this.eles&&this.eles[a]},e.getPages=function(){return this.eles&&this.eles.length?this.eles:null},e.reOrder=function(a,b){var c=this.eles.splice(a,1)[0];this.eles.splice(b,0,c),this.fire("reorder",a,b)},e._getGetRequestObj=function(){var a={url:this.fetchUrl,data:{id:this.id}};return a},e._getPostRequestObj=function(a){({type:"POST",url:this.postUrl,data:{id:this.id,poster:this.generateJson()}})},e._error=function(){this.fire("error")},e._success=function(a){this.data(a)},e._always=function(){this.fire("loaded")},b.exports=d},{"../../external/service":12,"../elements/model":21}],27:[function(a,b,c){function d(a,b){var c,d,e,f,g,h=b||"#J_viewport",i=$(a);c=i.height(),d=i.width(),e=320/486,f=d/c,g=f>=e?c/486:d/320,1!=g&&$(h).attr("content","width=320, initial-scale="+g+", maximum-scale="+g+", user-scalable=no")}b.exports=d},{}],28:[function(a,b,c){var d=function(){var a,b=document.createElement("fakeelement"),c={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"};for(a in c)if(void 0!==b.style[a])return c[a]}(),e=function(a){this.$container=$(a.container),this.pageSelector=a.page||".phone-page",this.pageArray=this.$container.find(this.pageSelector),this.currentPageClass=a.currentPageClass||"active",this.attr=a.attr||"animate",this.preLoadNum=a.preLoadNum||3,this.listenPostMessage(),this.init()};e.prototype.listenPostMessage=function(){var a=this;window.addEventListener("message",function(b){"nextPage"==b.data?a.nextPage():"prePage"==b.data&&a.prePage()},!1)},e.prototype.init=function(){this.pageArray=this.$container.find(this.pageSelector),this.index=0,this.pageLength=this.pageArray.length,this.isAnimating=!1,this.animationArray=[],this.childrenNodes=[];var a=this,b=this.attr;$.each(this.pageArray,function(c,d){var e=$(d);a.animationArray.push(e.data(b)||"fadeUp"),a.childrenNodes.push(e.children(".removeable")),e.css("z-index",c)}),this.pageArray.removeClass(this.currentPageClass).eq(this.index).addClass(this.currentPageClass),this._showPage(this.index)},e.prototype.preventDefault=function(a){a.preventDefault()},e.prototype.enable=function(){var a=this;return document.addEventListener("touchmove",this.preventDefault,!1),this.$container.on("swipeDown",this.pageSelector,function(b){b.preventDefault(),a.prePage()}),this.$container.on("swipeUp",this.pageSelector,function(b){b.preventDefault(),a.nextPage()}),this},e.prototype.flipPage=function(a){function b(b){function d(){g.removeClass((a?"":f+" ")+j.currentPageClass),a&&i.removeClass(h),j._showPage(e,c),j.isAnimating=!1,j.idxUpdated&&j.idxUpdated(e,c)}"slideInUp"==b.animationName||"slideOutDown"==b.animationName?d():setTimeout(d,700)}var c=this.index,e=a?++this.index:--this.index,f=this.animationArray[c]+(a?"":" out animated"),g=this.pageArray.eq(c),h=this.animationArray[e]+(a?" animated":""),i=this.pageArray.eq(e),j=this;this.isAnimating=!0,!a&&i.addClass(this.currentPageClass),a?i.addClass(h+" "+j.currentPageClass).one(d,b):g.addClass(f).one(d,b)},e.prototype.nextPage=function(){this.isAnimating||this.index==this.pageLength-1||this.flipPage(!0)},e.prototype.prePage=function(){this.isAnimating||0==this.index||this.flipPage(!1)},e.prototype._showPage=function(a,b){var c=this.childrenNodes[a],d=this.childrenNodes[b],e=(c.data("animate")||"fadeUp")+" animated";if(c.removeClass("removeable").addClass(e),void 0!=b){var f=(d.data("animate")||"fadeUp")+" animated";d.addClass("removeable").removeClass(f)}},b.exports=e},{}]},{},["j/aKKu"]);